###########################
# Qing - Yiguandao Focus Tree
# By Me myself and I
###########################

	shared_focus = {
		id = QIE_tianran_takes_over
		icon = GFX_goal_china_yiguandao
		cost = 2.00
		available = {
			OR = {
				has_global_flag = QIE_yiguandao_couped
				AND = {
					tag = SQI
					has_country_leader = {
						name = "Puyi"
						ruling_only = yes
					}
				}
			}
			has_government = national_populist
			NOT = { has_completed_focus = QIE_form_emergency_govt }
		}
		
		bypass = {
			hidden_trigger = {
				OR = {
					has_global_flag = QIE_yiguandao_couped
					AND = {
						tag = SQI
						has_country_leader = {
							name = "Puyi"
							ruling_only = yes
						}
					}
				}
				has_government = national_populist
				NOT = { has_completed_focus = QIE_form_emergency_govt }
			}
		}
		x = 46
		y = 0
		
		offset = {
			x = -20
			y = 0
			trigger = {
				tag = SQI
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_tianran_takes_over"
			custom_effect_tooltip = QIE_yiguandao_coup_tooltip
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_infiltrate_military
		icon = GFX_goal_LEC_police3
		cost = 5.00
		prerequisite = {
			focus = QIE_tianran_takes_over
		}
		x = -1
		y = 1

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_YGD_infiltrate_military"
			if = {
				limit = {
					tag = QIE
				}
				swap_ideas = {
					remove_idea = QIE_YGD_very_disloyal_military
					add_idea = QIE_YGD_disloyal_military
				}
				army_experience = 20
			}
			else = {
				add_war_support = 0.10
				army_experience = 25
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_convert_zhili_monarchists
		icon = GFX_goal_QIE_modernize_monarchy
		cost = 5.00
		prerequisite = {
			focus = QIE_tianran_takes_over
		}
		x = 1
		y = 1

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_YGD_convert_zhili_monarchists"
			add_political_power = 120
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_sideline_manchu
		icon = GFX_focus_rom_handle_king
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_infiltrate_military
		}
		x = -3
		y = 2

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_consolidate_civ_power
		icon = GFX_goal_QIE_forbiddenpalace
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_infiltrate_military
		}
		prerequisite = {
			focus = QIE_YGD_convert_zhili_monarchists
		}
		x = -1
		y = 2

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	
	shared_focus = {
		id = QIE_YGD_destroy_secularists
		icon = GFX_HOL_crackdown_syndie
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_infiltrate_military
		}
		prerequisite = {
			focus = QIE_YGD_convert_zhili_monarchists
		}
		x = 1
		y = 2

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_popularity = {
				ideology = totalist
				popularity = -0.10
			}
			add_popularity = {
				ideology = syndicalist
				popularity = -0.10
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = -0.10
			}
			add_popularity = {
				ideology = social_liberal
				popularity = -0.10
			}
			add_stability = 0.10
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_expand_control
		icon = GFX_goal_SQI_confucianism
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_convert_zhili_monarchists
		}
		x = 3
		y = 2

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_legal_reform
		icon = GFX_goal_civil_service
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_sideline_manchu
		}
		prerequisite = {
			focus = QIE_YGD_consolidate_civ_power
		}
		x = -2
		y = 3

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_re_educate_emperor
		icon = GFX_goal_QIE_puyi_restored
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_consolidate_civ_power
		}
		prerequisite = {
			focus = QIE_YGD_destroy_secularists
		}
		x = 0
		y = 3

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_dispatch_missionaries
		icon = GFX_focus_generic_military_academy
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_destroy_secularists
		}
		prerequisite = {
			focus = QIE_YGD_expand_control
		}
		x = 2
		y = 3

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_ideas = QIE_missionary_idea
			add_popularity = {
				ideology = national_populist
				popularity = 0.10
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_assimilate_NCERA
		icon = GFX_goal_QIE_ncera
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_legal_reform
		}
		x = -3
		y = 4

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			if = {
				limit = {
					tag = QIE
				}
				log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
				set_temp_variable = { temp = party_popularity@social_democrat }
				add_popularity = {
					ideology = social_democrat
					popularity = -0.50
				}
				add_popularity = {
					ideology = national_populist
					popularity = temp
				}
				add_political_power = 70
			}
			else = {
				add_popularity = {
					ideology = national_populist
					popularity = 0.10
				}
			}
			add_ideas = QIE_rural_reform_idea
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_guiyidao
		icon = GFX_goal_QIE_confucianism
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_assimilate_NCERA
		}
		x = -3
		y = 5

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_secure_rail_nodes
		icon = GFX_goal_generic_seize_railway
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_legal_reform
		}
		available = {
			OR = {
				owns_state = 608
				owns_state = 597
				owns_state = 1048
				owns_state = 613
			}
		}
		x = -1
		y = 4

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			every_owned_state = {
				limit = {
					OR = {
						state = 608
						state = 597
						state = 1048
						state = 613
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_infra
		icon = GFX_goal_generic_railway_construction
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_secure_rail_nodes
		}
		prerequisite = {
			focus = QIE_YGD_guiyidao
		}
		x = -2
		y = 6

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			every_owned_state = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			add_political_power = 50
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_hubei
		icon = GFX_goal_LEP_repression
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_dispatch_missionaries
		}
		x = 1
		y = 4

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_factories1
		icon = GFX_goal_model_cities
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_dispatch_missionaries
		}
		x = 3
		y = 4

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_factories2
		icon = GFX_goal_MON_dev_chinese_industry
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_hubei
		}
		prerequisite = {
			focus = QIE_YGD_jinan
		}
		x = 2
		y = 6

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_jinan
		icon = GFX_goal_generic_coal_mining
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_factories1
		}
		x = 3
		y = 5

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_holy_meritocracy
		icon = GFX_goal_ANQ_nationalist_credibility
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_re_educate_emperor
		}
		x = 0
		y = 5

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_YGD_holy_meritocracy"
			add_research_slot = 1
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_consolidated_rule
		icon = GFX_goal_ANQ_qing_loyalty
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_holy_meritocracy
		}
		x = 0
		y = 6

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_launch_national_purification
		icon = GFX_goal_mass_concentration_of_army
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_consolidated_rule
		}
		prerequisite = {
			focus = QIE_YGD_factories2
		}
		prerequisite = {
			focus = QIE_YGD_infra
		}
		x = 0
		y = 7

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_destroy_concessions
		icon = GFX_goal_QIE_destroy_LEC
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_launch_national_purification
		}
		x = -1
		y = 8

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_the_final_enemy
		icon = GFX_focus_AST_war_japan
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_launch_national_purification
		}
		x = 1
		y = 8

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	shared_focus = {
		id = QIE_YGD_we_win
		icon = GFX_Goal_YUN_Promote_Tourism
		cost = 5.00
		prerequisite = {
			focus = QIE_YGD_the_final_enemy
		}
		prerequisite = {
			focus = QIE_YGD_destroy_concessions
		}
		x = 0
		y = 9

		relative_position_id = QIE_tianran_takes_over

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus QIE_pick_YCP"
			add_political_power = 100
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}