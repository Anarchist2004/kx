germany_flees_to_exile = {

	GER = {
		PREV = {
			transfer_technology = yes
		}
		every_unit_leader = {
			set_nationality = PREV
		}
		every_navy_leader = {
			set_nationality = PREV
		}
	}
	
	add_manpower = 50000
	set_major = yes
	if = {
		limit = { has_global_flag = wilhelmiided }
		create_country_leader = {
			name = "Wilhelm III"
			desc = "POLITICS_WILLY_3_DESC"
			picture = "gfx/leaders/GER/Portrait_Germany_Wilhelm_III.tga"
			expire = "1965.1.1"
			ideology = social_conservative_subtype
		}
		create_country_leader = {
			name = "Wilhelm III"
			desc = "POLITICS_WILLY_3_DESC"
			picture = "gfx/leaders/GER/Portrait_Germany_Wilhelm_III.tga"
			expire = "1965.1.1"
			ideology = market_liberal_subtype
		}
		create_country_leader = {
			name = "Wilhelm III"
			desc = "POLITICS_WILLY_3_DESC"
			picture = "gfx/leaders/GER/Portrait_Germany_Wilhelm_III.tga"
			expire = "1965.1.1"
			ideology = social_democrat_subtype
		}
		create_country_leader = {
			name = "Wilhelm III"
			desc = "POLITICS_WILLY_3_DESC"
			picture = "gfx/leaders/GER/Portrait_Germany_Wilhelm_III.tga"
			expire = "1965.1.1"
			ideology = paternal_autocrat_subtype
		}
		create_country_leader = {
			name = "Wilhelm III"
			desc = "POLITICS_WILLY_3_DESC"
			picture = "gfx/leaders/GER/Portrait_Germany_Wilhelm_III.tga"
			expire = "1965.1.1"
			ideology = authoritarian_democrat_subtype
		}
	}
	
	GER = {
		# transfer a sizeable amount of equipment
		set_temp_variable = { temp = num_equipment@infantry_equipment }
		multiply_temp_variable = { temp = 0.35 }
		send_equipment = { target = PREV type = infantry_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@artillery_equipment }
		multiply_temp_variable = { temp = 0.35 }
		send_equipment = { target = PREV type = artillery_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@support_equipment }
		multiply_temp_variable = { temp = 0.5 }
		send_equipment = { target = PREV type = support_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@mechanized_equipment }
		multiply_temp_variable = { temp = 0.2 }
		send_equipment = { target = PREV type = mechanized_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@motorized_equipment }
		multiply_temp_variable = { temp = 0.35 }
		send_equipment = { target = PREV type = motorized_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@light_tank_equipment }
		multiply_temp_variable = { temp = 0.3 }
		send_equipment = { target = PREV type = light_tank_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@medium_tank_equipment }
		multiply_temp_variable = { temp = 0.2 }
		send_equipment = { target = PREV type = medium_tank_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@heavy_tank_equipment }
		multiply_temp_variable = { temp = 0.2 }
		send_equipment = { target = PREV type = heavy_tank_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@modern_tank_equipment }
		multiply_temp_variable = { temp = 0.3 }
		send_equipment = { target = PREV type = modern_tank_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@nav_bomber_equipment }
		multiply_temp_variable = { temp = 0.35 }
		send_equipment = { target = PREV type = nav_bomber_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@CAS_equipment }
		multiply_temp_variable = { temp = 0.35 }
		send_equipment = { target = PREV type = CAS_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@fighter_equipment }
		multiply_temp_variable = { temp = 0.5 }
		send_equipment = { target = PREV type = fighter_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@heavy_fighter_equipment }
		multiply_temp_variable = { temp = 0.5 }
		send_equipment = { target = PREV type = heavy_fighter_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@tac_bomber_equipment }
		multiply_temp_variable = { temp = 0.4 }
		send_equipment = { target = PREV type = tac_bomber_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@strat_bomber_equipment }
		multiply_temp_variable = { temp = 0.25 }
		send_equipment = { target = PREV type = strat_bomber_equipment amount = temp }

		set_temp_variable = { temp = num_equipment@convoy }
		multiply_temp_variable = { temp = 0.5 }
		send_equipment = { target = PREV type = convoy amount = temp }
	}

	change_tag_from = GER
	set_cosmetic_tag = GEX

	# now do the regular German capitulation
	germany_capitulates = yes
}

germany_flees_to_africa = {
	# first everyone who's occupying FROM should grab states
	take_occupied_states_in_africa = yes
	every_owned_state = {
		limit = {
			OR = {
				is_on_continent = africa
				state = 710 #Diego Garcia
			}
			is_controlled_by = GER
		}
		PREV = { transfer_state = PREV }
	}
}